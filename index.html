<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>テスト</title>
</head>
<body>
    <div id="res">結果：</div>

</body>

<style>

</style>

<script>
    class TestClass {
        constructor() {
            (() => {this.init()})()
        }

        init() {
            let can = document.createElement("canvas");
            can.width = 100;
            can.height = 100;
            can.style.backgroundColor = "beige";
            can.addEventListener("touchend",(e) => {
                this.cursedPreventDefault();
                let width = window.innerWidth;
                let height = window.innerHeight;
                document.getElementById("res").textContent = width + "," + height;
            });
            document.body.appendChild(can);


            console.log("!");
        }


        cursedPreventDefault(e) {
            window.ontouchstart = ((e) => {e.preventDefault()});
            window.ontouchend = ((e) => {e.preventDefault()});
            window.ontouchmove = ((e) => {e.preventDefault()});
            window.ontouchcancel = ((e) => {e.preventDefault()});

            window.addEventListener("beforeunload",(e) => {e.returnValue = "really?"});
            console.log("?");
        }
    }

    let test = new TestClass();

</script>
</html>
